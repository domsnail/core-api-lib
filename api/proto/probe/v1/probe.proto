syntax = "proto3";

package domsnail.coordinator.v1;

option go_package = "github.com/domsnail/core-api-lib/gen/go/api/proto/probe/v1;probev1";

import "protoc-gen-openapiv2/options/annotations.proto";

import "api/proto/whois/v1/whois.proto";

message GenericProbe {
  string UUID = 1 [(grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {
    description: "Unique probe UUID"
  }];

  ProbeType type = 2 [(grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {
    description: "Previously defined probe type"
  }];

  bool response_required = 3 [(grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {
    description: "Is sync response required"
  }];

  oneof options {
    whois.v1.ProbeOptions whois = 4;
  }
}

message GenericProbes {
  repeated GenericProbe probes = 1;
}

message GenericProbeResponse {
  string UUID = 1;

  oneof probed {
    whois.v1.WhoisInfo whois = 3;
  }
}

enum ProbeType {
  PROBE_TYPE_UNKNOWN = 0;
  PROBE_TYPE_WHOIS = 1;
  PROBE_TYPE_PING = 2;
}